CREATE TABLE users (id INT PRIMARY KEY AUTO_INCREMENT, email VARCHAR(100) NOT NULL UNIQUE, password VARCHAR(64) NOT NULL);
CREATE TABLE patients (id INT PRIMARY KEY AUTO_INCREMENT, personal_id CHAR(14) NOT NULL UNIQUE, name VARCHAR(50) NOT NULL, lastname VARCHAR(50) NOT NULL, birthdate DATE NOT NULL, email VARCHAR(100), phone VARCHAR(11), follow_up BOOLEAN NOT NULL, user_id INT, FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE);
CREATE TABLE consultations (id INT PRIMARY KEY AUTO_INCREMENT, description TEXT NOT NULL, registration_date DATETIME, patient_id INT, FOREIGN KEY (patient_id) REFERENCES patients(id) ON DELETE CASCADE);
CREATE TRIGGER create_consultation BEFORE INSERT ON consultations FOR EACH ROW SET NEW.registration_date = NOW();